## 分布式事务
什么是分布式事务？例如，有个订单系统，在系统A里面扣库存，在系统B里面生成订单。在非正常情况下，库存扣完后，由于某些原因插入订单失败，这时需要在两个系统中完成回滚操作。分布式事务实现有很多种，最具代表性的是由Oracle Tuxedo系统提出的XA分布式事务协议。

XA协议包括两阶段提交（2PC）和三阶段提交（3PC）。

两阶段提交：第一阶段：事务协调者向所有事务参与者发送Prepare请求，所有参与者执行成功返回完成消息。第二阶段：事务协调者发现都返回了完成消息，那么它会向所有事务参与者发出Commit请求。 两阶段提交的问题：第一个，性能问题，只有当所有节点准备完毕后，事务协调者才会通知提交，有非常大的性能问题。 单点故障问题，事务协调者是XA模型的核心，一旦挂掉。。 还有丢失消息导致不一致的问题，在第二阶段，一部分事务参与者收到了提交消息，另一部分事务参与者没有到提交消息。。。

其他分布式事务的方案： XA三阶段提交： 在二阶段的基础上增加了CanCommit阶段，并且引入了超时机制。一旦事务参与者迟迟没有接收到事务协调者的commit请求，会自动进行本地commit。但还是没有解决性能问题和单点故障问题。

MQ事务，利用消息中间件来异步完成后一半更新，实现系统的最终一致性。这个方式避免了像XA协议那样的性能问题。

TCC事务是Try，Commit，Cancle三种指令的缩写，其逻辑模式类似于XA两阶段提交，但是实现方式是在代码层面来人为实现。


## SOA
面向服务的框架。

## RPC
RPC全称为Remote Procedure Call，翻译过来为“远程过程调用”。目前，主流的平台中都支持各种远程调用技术，以满足分布式系统架构中不同的系统之间的远程通信和相互调用。远程调用的应用场景极其广泛，实现的方式也各式各样。  

通信协议的层面划分：   
基于HTTP协议的：基于文本的SOAP（XML）、Rest（JSON）、基于二进制Hessian（Binary）  
基于TCP协议的：通常会借助Mina、Netty等高性能网络框架  

不同的开发语言和平台层面划分：  
单种语言或平台特定支持的通信技术(例如Java平台的RMI、.NET平台Remoting)    
支持跨平台通信的技术（例如HTTP Rest、Thrift等）

调用过程划分：   
同步通信调用（同步RPC）   
异步通信调用（MQ、异步RPC）

## CAP理论
一个分布式系统只能满足一致性（Consistency）、可用性（Availability）和分区容错性（Partition tolerance）这三个选项中的两个。

http://www.hollischuang.com/archives/666